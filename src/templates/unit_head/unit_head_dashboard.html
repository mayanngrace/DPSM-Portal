{% extends "unit_head_layout.html" %} {% block unit_head_dashboard %}

<head>
    <title>Unit Head - Dashboard</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>

    <style type="text/css">
  

      /* CSS - Tabs */
    .tab {
      overflow: hidden;
      border-bottom: 1px solid #ccc;
      /*background-color: #f1f1f1;*/
    }

    /* Style the buttons that are used to open the tab content */
    .tab button {
      background-color: inherit;
      float: center;
      border: 1px solid #ccc;
      outline: none;
      width: 49.8%;
      /*border-top-left-radius: 9px;
      border-top-right-radius: 9px;*/
      cursor: pointer;
      padding: 14px 16px;
      transition: 0.3s;
    }

    /* Change background color of buttons on hover */
    .tab button:hover {
      background-color: #ddd;
    }

    /* Create an active/current tablink class */
    .tab button.active {
      background-color: #ccc;
    }

    /* Style the tab content */
    .tabcontent {
      display: none;
      padding: 6px 12px;
      /*border: 1px solid #ccc;*/
      border-top: none;
    }

    </style>

</head>



<section>
    <h1 align="center">Accomplishment Count</h1>
    <br>
    <div class="row">
        <div class="col-sm-6">
            <span>Mathematical and Computing Sciences Unit</span>
        </div>
        <div class="col-sm-6">
            <div class="input-group float-right">
                <label>From:</label>
                <input class="form-control" type="date" id="min" name="min">
                <label>To:</label>
                <input class="form-control" type="date" id="max" name="max">
                <button type="button" class="btn btn-primary float-right">Filter</button>
            </div>
        </div>
    </div>
    
    

    <div class="tab">
        <button class="tablinks active" onclick="openTab(event, 'overview')">Overview</button>
        <button class="tablinks" onclick="openTab(event, 'full_list')">Full List</button>
    </div>

    <!-- Unit Head Assignment -->
    <!-- Graphs -->
    <div id="overview" class="tabcontent" style="display:block;">
        <div>
            <canvas id="accomplishmentChart"></canvas>
        </div>

        <script>
            let accomplishmentChart = document.getElementById('accomplishmentChart').getContext('2d');

            let countChart = new Chart(accomplishmentChart, {
                type:'bar', 
                data:{
                    labels:['Publication', 'Public Service', 'Trainings/Seminars', 'Licensure Exams', 'Research Grants'],
                    datasets:[{
                        label:'MCSU',
                        data:[
                            11,
                            5,
                            10,
                            14,
                            7
                        ],
                        backgroundColor: [
                            'rgba(205, 72, 141, 0.8)',
                            'rgba(205, 72, 141, 0.8)',
                            'rgba(205, 72, 141, 0.8)',
                            'rgba(205, 72, 141, 0.8)',
                            'rgba(205, 72, 141, 0.8)'
                        ]
                    },
                    {
                        label:'Chemistry',
                        data:[
                            20,
                            11,
                            25,
                            34,
                            17
                        ],
                        backgroundColor: [
                            'rgba(20, 222, 55, 0.8)',
                            'rgba(20, 222, 55, 0.8)',
                            'rgba(20, 222, 55, 0.8)',
                            'rgba(20, 222, 55, 0.8)',
                            'rgba(20, 222, 55, 0.8)'
                        ]
                    },
                    {
                        label:'Physics/Geology',
                        data:[
                            11,
                            5,
                            10,
                            14,
                            7
                        ],
                        backgroundColor: [
                            'rgba(20, 161, 222, 0.8)',
                            'rgba(20, 161, 222, 0.8)',
                            'rgba(20, 161, 222, 0.8)',
                            'rgba(20, 161, 222, 0.8)',
                            'rgba(20, 161, 222, 0.8)'
                        ]
                    }],
                },
                options:{
                    scales:{
                        xAxes:[{
                            stacked: true
                        }],
                        yAxes:[{
                            ticks:{beginAtZero: true},
                            stacked: true
                            
                        }]
                       
                    }
                }
            });
        </script>
        
    </div>

    <div id="full_list" class="tabcontent">
        <button type="button" class="btn btn-primary float-right">Download XLS</button>
        <br><br>
        
        <div class="table-responsive">
            <table class="table table-striped table-hover dt-bootstrap4 no-footer" id="accomplishemt_table" style="font-size: 1vw; width: 100%;">
                <thead>
                    <tr>
                        <th scope="col">Name of Faculty</th>
                        <th scope="col">Accomplishment</th>
                        <th scope="col">Accomplishment Type</th>
                        <th scope="col">Start Date</th>
                        <th scope="col">End Date</th>
                    </tr>
                    <tr>
                        <th>
                            <input class="form-control" type="text" id="faculty_name" name="" style="font-size: 1vw;">
                        </th>
                        <th>
                            <input class="form-control" type="text" id="accomplishment" name="" style="font-size: 1vw;">
                        </th>
                        <th>
                            <select class="suffix-select form-select form-control suffix" aria-label="" id="accomplishment_type" name="" data-field="suffix" onchange="filter_accomplishments()" style="font-size: 1vw;">
                                <option selected value="">All</option>
                                <option value="Publication">Publication</option>
                                <option value="Research Grant">Research Grant</option>
                                <option value="Public Service">Public Service</option>
                                <option value="Training/Seminar">Training/Seminar</option>
                            </select>
                        </th>
                        <th>
                            <input class="form-control" type="date" id="start_date" name="" style="font-size: 1vw;">

                        </th>
                        <th>
                            <input class="form-control" type="date" id="end_date" name="" style="font-size: 1vw;">
                        </th>
                    </tr>
                </thead>
                <tbody id="myTable">
                    <tr class="clickable" onclick="window.location='#'">
                        <th scope="row">Baes, Gregorio</th>
                        <td><span id="">Test Publication</span></td>
                        <td><span id="">Research Grant</span></td>
                        <td><span id="start_date">2020-02-01</span></td>
                        <td><span id="end_date">2022-01-31</span></td>
                    </tr>
                    <tr>
                        <th scope="row">Basco, Therese Anne</th>
                        <td><span id="">Journal</span></td>
                        <td><span id="">Public Service</span></td>
                        <td><span id="start_date">2019-10-23</span></td>
                        <td><span id="end_date">2021-01-30</span></td>
                    </tr>
                    <tr>
                        <th scope="row">Chua, Richard Bryann</th>
                        <td><span id="">Trainor - AUN</span></td>
                        <td><span id="">Training/Seminar</span></td>
                        <td><span id="start_date">2021-01-30</span></td>
                        <td><span id="end_date">2021-12-15</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    
</section>

<script type='text/javascript'>

    function openTab(evt, tabName) 
    {
        // Declare all variables
        var i, tabcontent, tablinks;

        // Get all elements with class="tabcontent" and hide them
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }

        // Get all elements with class="tablinks" and remove the class "active"
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }

        // Show the current tab, and add an "active" class to the button that opened the tab
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";
    }
</script>

<script>
$(document).ready(function(){
  $("#faculty_name").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#myTable tr").filter(function() {
      $(this).toggle($(this).find("th").text().toLowerCase().indexOf(value) > -1)
    });
  });

  $("#accomplishment").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#myTable tr").filter(function() {
      $(this).toggle($(this).find("td:eq(0)").text().toLowerCase().indexOf(value) > -1)
    });
  });

  $("#start_date").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#myTable tr").filter(function() {
      $(this).toggle($(this).find("td:eq(2)").text().toLowerCase().indexOf(value) > -1)
    });
  });

  $("#end_date").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#myTable tr").filter(function() {
      $(this).toggle($(this).find("td:eq(3)").text().toLowerCase().indexOf(value) > -1)
    });
  });
});
</script>

<script>
    $(document).ready(function(){
        $('#accomplishemt_table').DataTable({searching: false, paging: false, info: false, select:true});
    });
</script>

<script>
    function filter_accomplishments() {
        var input, filter, table, tr, td, i;
        input = document.getElementById("accomplishment_type");
        filter = input.value.toUpperCase();
        table = document.getElementById("accomplishemt_table");
        tr = table.getElementsByTagName("tr");
        
        for (i = 0; i < tr.length; i++) {
            td = tr[i].getElementsByTagName("td")[1];
            if (td) {
                if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                    tr[i].style.display = "";
                } else {
                    tr[i].style.display = "none";
                }
            }       
        }
    }
</script>

<script>
    var minDate, maxDate;
 
    $.fn.dataTable.ext.search.push(
        function( settings, data, dataIndex ) {
            var min = minDate.val();
            var max = maxDate.val();
            var from_date = new Date( data[2] );
            var to_date = new Date( data[3] );
     
            if (
                ( min <= to_date   && from_date <= max )
            ) {
                return true;
            }
            return false;
        }
    );
     
    $(document).ready(function() {
        // Create date inputs
        minDate = new DateTime($('#min'), {
            format: 'YYYY MM Do'
        });
        maxDate = new DateTime($('#max'), {
            format: 'YYYY MM Do'
        });
     
        // DataTables initialisation
        var table = $('#myTable').DataTable();
     
        // Refilter the table
        $('#filter').on('click', function () {
            table.draw();
        });
    });
</script>

{% endblock %}